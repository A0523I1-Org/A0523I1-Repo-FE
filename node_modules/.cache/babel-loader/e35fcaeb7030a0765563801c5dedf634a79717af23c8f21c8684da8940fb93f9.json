{"ast":null,"code":"import axios from \"axios\";\n/** Call API */\naxios.interceptors.response.use(response => response, error => {\n  if (error.response && error.response.status === 401) {\n    // Redirect to unauthorized page\n    window.location.href = '/unauthorized';\n  }\n  return Promise.reject(error);\n});\nexport async function login(username, password) {\n  try {\n    const response = await axios.post(`http://localhost:8080/login`, {\n      username,\n      password\n    });\n    console.log(response);\n    return response.data;\n  } catch (err) {\n    throw err;\n  }\n}\nexport async function logout(token) {\n  try {\n    await axios.get(`http://localhost:8080/logout`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n\n    // Clear token from localStorage và sessionStorage\n    localStorage.removeItem('token');\n    localStorage.removeItem('role');\n    sessionStorage.removeItem('token');\n    sessionStorage.removeItem('role');\n  } catch (err) {\n    throw err;\n  }\n}\n/** AUTHENTICATION CHECKER */\nexport function isAuthenticated() {\n  const token = localStorage.getItem('token') || sessionStorage.getItem('token');\n  return !!token;\n}\nexport function isAdmin() {\n  const role = localStorage.getItem('role');\n  if (!role) {\n    return false;\n  }\n  return role.includes('ADMIN');\n}\n\n// get token\nexport function getToken() {\n  let token = localStorage.getItem('token');\n  if (!token) {\n    token = sessionStorage.getItem('token');\n  }\n  return token;\n}","map":{"version":3,"names":["axios","interceptors","response","use","error","status","window","location","href","Promise","reject","login","username","password","post","console","log","data","err","logout","token","get","headers","Authorization","localStorage","removeItem","sessionStorage","isAuthenticated","getItem","isAdmin","role","includes","getToken"],"sources":["D:/Code_Gym/Data GitHub/final_module/Developer/A0523I1-Repo-FE/src/services/Authenticate/AuthService.js"],"sourcesContent":["import axios from \"axios\";\r\n/** Call API */\r\naxios.interceptors.response.use(\r\n    response => response,\r\n    error => {\r\n        if (error.response && error.response.status === 401) {\r\n            // Redirect to unauthorized page\r\n            window.location.href = '/unauthorized';\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport async function login(username, password){\r\n    try {\r\n        const response = await axios.post(`http://localhost:8080/login`, {username, password})\r\n        console.log(response)\r\n        return response.data;\r\n    } catch(err) {\r\n        throw err;\r\n    }\r\n}\r\nexport async function logout(token){\r\n    try {\r\n        await axios.get(`http://localhost:8080/logout`, {\r\n            headers: {Authorization: `Bearer ${token}`}\r\n        });\r\n\r\n        // Clear token from localStorage và sessionStorage\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('role');\r\n\r\n        sessionStorage.removeItem('token');\r\n        sessionStorage.removeItem('role');\r\n\r\n    } catch(err) {\r\n        throw err;\r\n    }\r\n}\r\n/** AUTHENTICATION CHECKER */\r\nexport function isAuthenticated() {\r\n    const token = localStorage.getItem('token') || sessionStorage.getItem('token')\r\n    return !!token\r\n}\r\nexport function isAdmin() {\r\n    const role = localStorage.getItem('role')\r\n    if (!role) {\r\n        return false;\r\n    }\r\n    return role.includes('ADMIN');\r\n}\r\n\r\n// get token\r\nexport function getToken() {\r\n    let token = localStorage.getItem('token');\r\n    if (!token) {\r\n        token = sessionStorage.getItem('token');\r\n    }\r\n    return token;\r\n}"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB;AACAA,KAAK,CAACC,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC3BD,QAAQ,IAAIA,QAAQ,EACpBE,KAAK,IAAI;EACL,IAAIA,KAAK,CAACF,QAAQ,IAAIE,KAAK,CAACF,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;IACjD;IACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,eAAe;EAC1C;EACA,OAAOC,OAAO,CAACC,MAAM,CAACN,KAAK,CAAC;AAChC,CACJ,CAAC;AAED,OAAO,eAAeO,KAAKA,CAACC,QAAQ,EAAEC,QAAQ,EAAC;EAC3C,IAAI;IACA,MAAMX,QAAQ,GAAG,MAAMF,KAAK,CAACc,IAAI,CAAC,6BAA6B,EAAE;MAACF,QAAQ;MAAEC;IAAQ,CAAC,CAAC;IACtFE,OAAO,CAACC,GAAG,CAACd,QAAQ,CAAC;IACrB,OAAOA,QAAQ,CAACe,IAAI;EACxB,CAAC,CAAC,OAAMC,GAAG,EAAE;IACT,MAAMA,GAAG;EACb;AACJ;AACA,OAAO,eAAeC,MAAMA,CAACC,KAAK,EAAC;EAC/B,IAAI;IACA,MAAMpB,KAAK,CAACqB,GAAG,CAAC,8BAA8B,EAAE;MAC5CC,OAAO,EAAE;QAACC,aAAa,EAAE,UAAUH,KAAK;MAAE;IAC9C,CAAC,CAAC;;IAEF;IACAI,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;IAChCD,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;IAE/BC,cAAc,CAACD,UAAU,CAAC,OAAO,CAAC;IAClCC,cAAc,CAACD,UAAU,CAAC,MAAM,CAAC;EAErC,CAAC,CAAC,OAAMP,GAAG,EAAE;IACT,MAAMA,GAAG;EACb;AACJ;AACA;AACA,OAAO,SAASS,eAAeA,CAAA,EAAG;EAC9B,MAAMP,KAAK,GAAGI,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC,IAAIF,cAAc,CAACE,OAAO,CAAC,OAAO,CAAC;EAC9E,OAAO,CAAC,CAACR,KAAK;AAClB;AACA,OAAO,SAASS,OAAOA,CAAA,EAAG;EACtB,MAAMC,IAAI,GAAGN,YAAY,CAACI,OAAO,CAAC,MAAM,CAAC;EACzC,IAAI,CAACE,IAAI,EAAE;IACP,OAAO,KAAK;EAChB;EACA,OAAOA,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC;AACjC;;AAEA;AACA,OAAO,SAASC,QAAQA,CAAA,EAAG;EACvB,IAAIZ,KAAK,GAAGI,YAAY,CAACI,OAAO,CAAC,OAAO,CAAC;EACzC,IAAI,CAACR,KAAK,EAAE;IACRA,KAAK,GAAGM,cAAc,CAACE,OAAO,CAAC,OAAO,CAAC;EAC3C;EACA,OAAOR,KAAK;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}